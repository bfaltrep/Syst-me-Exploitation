#include "functions.h"
#include "system.h"
#include "translate.h"

int copyStringFromMachine(int from, char *to, unsigned size){
  unsigned int i = 0;
  bool reussite;
  int tmp;
  for ( ; i < size-1; ++i)
  {
    reussite = machine->ReadMem(from+i, 1, &tmp); 
    to[i]= tmp;

  	if(!reussite || to[i] == '\0'){
  		return i;
  	}
  }

  /***** Cas où on ne lit pas d'\0 avant d'arriver jusqu'à size *****/

  to[size-1]='\0';
  return i;
}

int copyStringtoMachine (char * from, int to, unsigned size){

  unsigned int i = 0;
  machine->WriteMem(to, 1,from[0]);
  
  for(; i < size-1;i++){
    if(from[i] == '\0'){
      break;
    }
    machine->WriteMem(to+i, 1,from[i]);
  }
  int tmp = '\0';
  machine->WriteMem(to+i, 1,tmp);

/*
  unsigned int i = 0;
  for(; i < size-1; i++){
    if ((from[i]=='\0'))
    {
      break;
    }
    else{
      machine->WriteRegister(2,from[i]);
    }
  }
  machine->WriteRegister(2,'\0');*/
  return i;
}