#ifdef CHANGED
#include "pageprovider.h"
#include "machine.h"

PageProvider::PageProvider(int nitems)
{
	map = new BitMap(nitems);
}

PageProvider::~PageProvider()
{
	delete map;
}

int PageProvider::GetEmptyPage()
{
	int res = map->Find();
	if(res != -1){
		int physAddr = res* PageSize;
		memset(machine->mainMemory[physAddr],'0',PageSize);
	}
	return res;
}

void PageProvider::ReleasePage(int page)
{
	map->Clear(page);

}

int	PageProvider::NumAvailablePage()
{
	return map->NumClear ();
}

#endif // CHANGED